---
title: "ä½¿ç”¨requestså‘é€æŒ‡å®šContent-Typeçš„multipartè¯·æ±‚"
date: 2019-06-25T01:54:55+08:00
draft: false

tags:
- python
- HTTP
---


ç¾¤é‡Œæœ‰æœ‹å‹æé—®ï¼Œå¦‚ä½•ä½¿ç”¨`requests`å®ç°å¦‚ä¸‹å›¾postmançš„`Content-Type`è®¾ç½®ï¼Ÿ

![](https://fg-public-1252239724.file.myqcloud.com/blog/20190624164458.png)



ç«‹åˆ»å°±æœ‰äººé—®äº†ï¼Œè¿™æ˜¯ä»€ä¹ˆï¼Ÿè¿™å’ŒHTTP headeré‡Œçš„`Content-Type`å¤´æ˜¯ä¸€å›äº‹å—ï¼Ÿ

ä¸æ˜¯ã€‚è¿™æ˜¯POSTè¯·æ±‚çš„ä¸€ç§ç‹¬ç‰¹çš„ç¼–ç æ–¹å¼ï¼š`multipart/form-data`ã€‚é‰´äºè¿™è´§å¹³æ—¶éœ²é¢æœºä¼šæ¯”è¾ƒå°‘ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆä»‹ç»ä¸€ä¸‹å®ƒã€‚

## multipart/form-dataæ˜¯ä»€ä¹ˆï¼Ÿ

HTTPåè®®è§„å®šäº†HTTPè¯·æ±‚çš„åŸºæœ¬æ ¼å¼ï¼ŒåŒ…æ‹¬methodã€urlã€headerã€bodyç­‰ï¼Œè§„å®šå¦‚æœè¯·æ±‚ä¸­éœ€è¦æºå¸¦æ•°æ®ï¼Œåº”è¯¥æ”¾åœ¨bodyä½“ä¸­ï¼Œä½†æ²¡æœ‰å…·ä½“è§„å®šbodyä½“å†…æ•°æ®çš„ç¼–ç è§„åˆ™ã€‚æºå¸¦æ•°æ®æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯formè¡¨å•äº†ï¼Œå®ƒä¸ä»…å¯ä»¥æºå¸¦æ™®é€šè¡¨å•å­—æ®µï¼Œè¿˜å¯ä»¥æºå¸¦æ–‡ä»¶ã€‚åœ¨æ–‡ä»¶ä¸Šä¼ çš„æ—¶å€™ï¼Œformè¡¨å•ä¼šä½¿ç”¨ä¸€ç§å¯èƒ½æ˜¯HTMLåœˆæœ€å¤æ‚çš„ç¼–ç æ–¹å¼ï¼š`multipart/form-data`ã€‚ä¹Ÿå°±æ˜¯æœ¬æ–‡çš„ä¸»è§’ã€‚

åœ¨æ–‡ä»¶ä¸Šä¼ çš„æ—¶å€™ï¼Œformè¡¨å•å¿…é¡»è®¾ç½®`enctype`å±æ€§ä¸º`multipart/form-data`ï¼Œç„¶åå°±å¯ä»¥æäº¤å¤šä¸ªæ–‡ä»¶ï¼Œæ··æ‚å¤šä¸ªè¡¨å•å­—æ®µäº†ã€‚



æ¥ç ”ç©¶ä¸€ä¸ªæ —å­ğŸŒ°ï¼š

```html
<form method="POST" action="http://www.baidu.com" enctype="multipart/form-data">
    <input type="file" name="file1" /><br />
    <input type="file" name="file2" /><br />
    <input type="text" name="text1" value="value1" /><br />
    <input type="text" name="text2" value="value2" /><br />
    <input type="submit" name="submit" value="submit" />
</form>
```

è¡¨å•å¾ˆç®€å•ï¼ŒåŒ…å«ä¸¤ä¸ªæ–‡ä»¶å’Œä¸¤ä¸ªæ–‡æœ¬å­—æ®µã€‚

![](https://fg-public-1252239724.file.myqcloud.com/blog/20190624182726.png)

æäº¤çš„è¡¨å•å¯ä»¥ä½¿ç”¨Charlesã€Wiresharkç­‰æŠ“åŒ…å·¥å…·æŠ“åˆ°åŸå§‹æŠ¥æ–‡ã€‚

```
POST / HTTP/1.1
Host: www.baidu.com
Connection: keep-alive
Content-Length: 4420
Cache-Control: max-age=0
Origin: null
Upgrade-Insecure-Requests: 1
DNT: 1
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryBtCkPAw9wNtlcOjj
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3
Accept-Encoding: gzip, deflate, br
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8

------WebKitFormBoundaryBtCkPAw9wNtlcOjj
Content-Disposition: form-data; name="file1"; filename="druid.png"
Content-Type: image/png

ï¿½PNG


IHDRï¿½^ï¿½KiTXtXML:com.adobe.xmp<?xpacket begin="ï»¿" id="W5M0MpCehiHzreSzNTczkc9d"?>
<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.6-c140 79.160451, 2017/05/06-01:08:21        ">
 <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <rdf:Description rdf:about=""/>
 </rdf:RDF>
</x:xmpmeta>
<?xpacket end="r"?>-CDï¿½gAMAï¿½ï¿½ï¿½asRGBï¿½ï¿½ï¿½PLTEï¿½ï¿½ï¿½mHLyQO}VWR6;ï¿½ï¿½ï¿½J,3[@DZ=Gï¿½ï¿½ï¿½Q=AlUVï¿½d_`BGuOTV;Aï¿½^^@,+ï¿½deÊ›ï¿½ï¿½ï¿½ï¿½`>@|VQuONï¿½`]p[`[9?ï¿½ï¿½ï¿½KAOAR12Rï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½|{ï¿½ï¿½ï¿½ï¿½ï¿½pjRH_ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½>ï¿½ï¿½\ï¿½ï¿½eï¿½`ï¿½ï¿½ï¿½ï¿½ï¿½^HFJ58ï¿½ï¿½ï¿½uUS= ï¿½ï¿½ï¿½B36F;>ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½KqÅ»ï¿½jGH/ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½!&,ï¿½ï¿½ï¿½aToï¿½lsï¿½ï¿½ï¿½93F,vï¿½ï¿½ï¿½ï¿½Ç¿ï¿½hLPï¿½ï¿½ï¿½c:3ï¿½ï¿½ï¿½j\B1Ipm~ï¿½ï¿½ï¿½yï¿½ï¿½!ï¿½ï¿½~ï¿½ï¿½rrï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½nï¿½Öliï¿½ï¿½ï¿½ï¿½ï¿½~yoï¿½ï¿½Äï¿½ï¿½qmï¿½ztdï¿½ï¿½ï¿½ï¿½ï¿½zvG,'3Y;6L2-O6BS7C}^Wï¿½{ub?Dï¿½ï¿½Úwrkvï¿½zï¿½ï¿½Ä¹^ï¿½}fgGï¿½ï¿½å£™`gwï¿½ia@ï¿½ï¿½oLII'ï¿½ï¿½ï¿½|mï¿½yï¿½ï¿½8Rï¿½ï¿½ï¿½616Ë¥ï¿½Qï¿½ï¿½&mï¿½Cf}ï¿½upï¿½ï¿½ï¿½Zï¿½ï¿½T{ï¿½ï¿½ï¿½B>I~[fï¿½ï¿½ï¿½5$%tï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½.FMKTRï¿½Ïkcï¿½ï¿½ï¿½;HQ'ï¿½ï¿½ Rm+?Orrï¿½Yï¿½A7O-MU?Y7ï¿½ï¿½ï¿½WTï¿½ï¿½ï¿½|g{_ï¿½Î’ï¿½ï¿½^ï¿½ï¿½ï¿½Ğº|qï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Pï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½s~ï¿½ï¿½ï¿½ï¿½Ö¢ï¿½ï¿½qm=34tlï¿½ï¿½bkgI^ï¿½ï¿½ï¿½YMYï¿½ï¿½XAPï¿½ï¿½ï¿½ï¿½ï¿½|Uï¿½ï¿½ï¿½ï¿½ï¿½vqvï¿½W`-~ï¿½İ©ï¿½ï¿½ï¿½ï¿½}syï¿½[Qï¿½ï¿½Õ„ï¿½ï¿½ï¿½ï¿½ï¿½4Xï¿½ï¿½]]d@]&5Dï¿½ï¿½eï¿½ï¿½:ï¿½ï¿½ï¿½VJe{ï¿½æ¶±q>8ï¿½ï¿½ï¿½|ï¿½ï¿½$1vï¿½ï¿½ï¿½~vÅ„ï¿½6ï¿½ï¿½]ï¿½ï¿½ï¿½zq	mï¿½QEn	ï¿½ï¿½ï¿½$+<ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½\U\ï¿½ï¿½ï¿½ï¿½ï¿½Ú»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½rofï¿½ï¿½~ï¿½ï¿½ï¿½ï¿½nbsï¿½ï¿½ï¿½dIQï¿½ï¿½ï¿½<ï¿½ã˜€ï¿½ï¿½ï¿½ï¿½Ã¶ï¿½Csï¿½ï¿½ï¿½ï¿½qï¿½Zsï¿½Egï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Gï¿½ï¿½2ï¿½ï¿½ï¿½ï¿½ï¿½9kï¿½Iï¿½ï¿½nï¿½ï¿½
ï¿½Hï¿½ï¿½IDAT(ï¿½c` pï¿½2((ï¿½)Ú™bï¿½dUï¿½9yï¿½ï¿½efï¿½-ï¿½G1uï¿½ï¿½1ï¿½oï¿½b--ï¿½ï¿½&ï¿½ï¿½ï¿½&p*X|ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê€ï¿½7Uï¿½!ï¿½*Jï¿½ï¿½ï¿½fï¿½ï¿½Uï¿½Afï¿½jï¿½<×²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½_(6fï¿½Rï¿½[Kï¿½	?å™´ï¿½ï¿½ï¿½.ï¿½ï¿½ï¿½Z'ï¿½ï¿½O J]7Jï¿½[hï¿½:Lï¿½ï¿½ï¿½ï¿½ï¿½BQï¿½tï¿½uï¿½Ã¹ï¿½ï¿½'ï¿½>ï¿½tï¿½Hï¿½)ï¿½hh/ï¿½ï¿½Zï¿½)  ,ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú’ï¿½$kï¿½ï¿½ï¿½Rï¿½ï¿½ ï¿½ï¿½ä“ï¿½#;ï¿½ã—³ï¿½bÜï¿½ï¿½ï¿½ï¿½ï¿½jï¿½ï¿½ï¿½Hï¿½yï¿½rXZï¿½Kï¿½ï¿½03ï¿½9wï¿½ï¿½+ï¿½ï¿½ï¿½nï¿½Q.ï¿½rï¿½ï¿½ï¿½ï¿½Ì—ï¿½Xï¿½ï¿½ï¿½nlÛrvK^ï¿½Ü°ï¿½ï¿½ï¿½B6Uï¿½\,ï¿½ï¿½ï¿½lï¿½ï¿½ï¿½\ï¿½&ï¿½ ï¿½9ï¿½,ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½{ï¿½ï¿½Ú»Sï¿½ï¿½ï¿½W4ï¿½uï¿½ï¿½ï¿½ï¿½Pwï¿½"yï¿½ï¿½ï¿½Ë•ï¿½ï¿½XWmegdb*Ü¸ï¿½Gï¿½)$ï¿½P,ï¿½ï¿½qï¿½'ï¿½ï¿½)Myï¿½fQ^^Ff{ï¿½Rqï¿½IVï¿½tï¿½ï¿½yï¿½ï¿½ï¿½$ï¿½uï¿½Yï¿½jR,Lï¿½ï¿½ï¿½ï¿½Iï¿½ ï¿½g:&_ï¿½Ï¸ï¿½Uï¿½ï¿½ï¿½ï¿½-ï¿½ï¿½ï¿½ï¿½Qï¿½Aï¿½ï¿½ï¿½ï¿½P$-ï¿½2=0rï¿½ï¿½ï¿½ï¿½ï¿½ï¿½nï¿½Iï¿½bgï¿½ï¿½ï¿½HcIMjï¿½Å¶ï¿½Kï¿½ï¿½ï¿½ï¿½eï¿½cqï¿½ï¿½gIï¿½ï¿½ï¿½ï¿½HNï¿½ï¿½ï¿½È¹ï¿½?ï¿½Q{-'gï¿½ï¿½ï¿½&(ï¿½ï¿½ï¿½ï¿½aï¿½ï¿½ï¿½ï¿½>ï¿½iï¿½ï¿½ï¿½,ï¿½}ï¿½ï¿½RÉ‰	&[M6$ï¿½ï¿½ï¿½Cï¿½Uï¿½ï¿½Ojkï¿½.z9ï¿½rï¿½ï¿½ï¿½#ï¿½3ï¿½ï¿½#ï¿½ï¿½fï¿½ï¿½_ï¿½ï¿½xï¿½Mï¿½h8ï¿½0ï¿½ï¿½lï¿½`JZ< ;eFï¿½ï¿½ï¿½ï¿½.ï¿½Û¦ï¿½ï¿½fï¿½ï¿½dqCï¿½ï¿½ï¿½ï¿½5'kN9ËŠï¿½cï¿½ï¿½&ï¿½
ï¿½
ÏŒï¿½8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½	ï¿½Yï¿½d8ï¿½ï¿½ï¿½IENDï¿½B`ï¿½
------WebKitFormBoundaryBtCkPAw9wNtlcOjj
Content-Disposition: form-data; name="file2"; filename="paladin.png"
Content-Type: image/png

ï¿½PNG


IHDRï¿½^ï¿½KiTXtXML:com.adobe.xmp<?xpacket begin="ï»¿" id="W5M0MpCehiHzreSzNTczkc9d"?>
<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.6-c140 79.160451, 2017/05/06-01:08:21        ">
 <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <rdf:Description rdf:about=""/>
 </rdf:RDF>
</x:xmpmeta>
<?xpacket end="r"?>-CDï¿½gAMAï¿½ï¿½ï¿½asRGBï¿½ï¿½ï¿½PLTEï¿½ï¿½ï¿½|1"ï¿½ï¿½ï¿½+ï¿½Ó»ï¿½ï¿½Yï¿½ï¿½ï¿½ï¿½|CÔº5r<ï¿½ï¿½Fï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  !ï¿½Ì²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×Ÿ':0HEï¿½J ï¿½Ñ³ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½N,$b)ï¿½ï¿½Wï¿½È©ï¿½ï¿½ï¿½B>ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½fï¿½ï¿½ï¿½ï¿½{&;<ï¿½g&Ã¿ï¿½>5BBï¿½ï¿½Rï¿½O%#ï¿½ï¿½ï¿½ï¿½~&ï¿½ï¿½oï¿½ï¿½ï¿½ï¿½ï¿½Ôºï¿½ï¿½ï¿½ï¿½ï¿½ï¿½%~KÍ™(Ò'ï¿½Ç†<$#ï¿½_*ï¿½ï¿½ËŠSH3ï¿½i%Ü¹)ï¿½ï¿½\Ò¸zzdï¿½ï¿½ghd+ï¿½ï¿½ï¿½ï¿½ï¿½yï¿½ï¿½7ï¿½ï¿½mï¿½ï¿½ï¿½ï¿½ï¿½Ù±%USÃ‘ï¿½ï¿½`ï¿½Y!ï¿½ï¿½Tï¿½V$Ã ï¿½?ï¿½Ï¨ï¿½ï¿½fï¿½P&ï¿½ï¿½{ï¿½iï¿½{{]ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½JÊ¾ï¿½ÄŒï¿½nï¿½ï¿½ï¿½ï¿½ï¿½ï¿½9;1@#ux5ï¿½ï¿½é]ï¿½o
ï¿½yï¿½ï¿½gT]^"=$Ò©-Õ«ï¿½ï¿½MÂ½aï¿½@%ï¿½ï¿½m]_Gï¿½ï¿½Êï¿½Uï¿½9hR/ï¿½ï¿½z_4!ï¿½ï¿½'ï¿½ï¿½xï¿½ï¿½4Æ]ï¿½n&ï¿½ï¿½aï¿½ï¿½+Ò´/ï¿½ï¿½.ï¿½wï¿½ï¿½sÇ¬ï¿½ï¿½lf>ï¿½ï¿½uï¿½s:ï¿½b!ï¿½ï¿½Õ¸ï¿½,ï¿½\ ï¿½Û»ï¿½ï¿½Iï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ï¿ï¿½ï¿½Sï¿½ï¿½Pl-ï¿½ï¿½ï¿½ï¿½ï¿½\V($ï¿½I"ï¿½ï¿½Ä²VmIï¿½Å²ï¿½ÎŸr`ï¿½ï¿½bjcÈ§C-	M=t.#ï¿½Oï¿½UÊ±Hï¿½ï¿½S}P?ï¿½ï¿½@ï¿½ï¿½2rRï¿½ï¿½ï¿½ï¿½}99-ï¿½ñš½«tï¿½w%4&+ï¿½ï¿½hï¿½ï¿½iÒ®&ï¿½c'ï¿½ï¿½jï¿½Lï¿½ï¿½vT:Ã®Dï¿½Îï¿½]&ï¿½ï¿½ï¿½ï¿½ï¿½Xï¿½Ö·on5ï¿½ï¿½@ï¿½uTï¿½ycï¿½ï¿½oï¿½WR0ï¿½Q(ï¿½ï¿½ï¿½//ï¿½ï¿½lï¿½ß¾ï¿½ç†–ï¿½ï¿½ï¿½ï¿½Dï¿½ï¿½;ï¿½ï¿½ï¿½ï¿½ï¿½Y%ï¿½ï¿½9ï¿½Çµï¿½}ï¿½ï¿½ï¿½ï¿½~
ï¿½L0W&ï¿½`ï¿½ï¿½AÇŸf|?^#ï¿½6Ã¸3ï¿½ï¿½ï¿½ï¿½ÅŒ3ï¿½ï¿½qHb%Å³ï¿½p9	ï¿½ï¿½Cï¿½ï¿½kï¿½e)ï¿½ï¿½ï¿½ï¿½ï¿½&ï¿½ï¿½Ğ©ï¿½IDAT(ï¿½c` ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
`ï¿½ï¿½muï¿½ï¿½ï¿½L,ï¿½%Uï¿½sï¿½]JNï¿½ï¿½ï¿½ï¿½ï¿½y0ï¿½Uï¿½ï¿½b>ï¿½ï¿½5ï¿½Âˆxï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ğ”ï¿½
ï¿½o.ï¿½x75uï¿½ï¿½yHï¿½jï¿½Lç‚­ï¿½z13+Jï¿½ï¿½ï¿½nï¿½2ï¿½&ÍŸÇ‘ï¿½'$g7ï¿½ï¿½ï¿½4ß‹Ò¬ï¿½ï¿½*ï¿½Qï¿½Wï¿½dï¿½ï¿½85ï¿½ï¿½rï¿½rï¿½ï¿½Ù‘ï¿½/ï¿½=aï¿½4D:ï¿½ï¿½CPï¿½ï¿½Vï¿½ï¿½ï¿½ï¿½ï¿½sfvï¿½ï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½&ï¿½ï¿½|Bvï¿½ï¿½ï¿½fï¿½ï¿½ï¿½Ó²yï¿½ï¿½Iï¿½ÏŠTIï¿½ï¿½JjhZï¿½9U_0cï¿½^3geFvÒ¼ï¿½nï¿½ï¿½ ï¿½ï¿½9ï¿½ï¿½ï¿½ï¿½İ¤ï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½Mï¿½ß½Ë¼,T~SHï¿½ï¿½GRï¿½E[ï¿½ï¿½Hï¿½:ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½;~ï¿½_ï¿½ï¿½fï¿½%v`ï¿½M
ï¿½dï¿½4eï¿½:ï¿½pï¿½åš¡Uï¿½ï¿½ï¿½_ï¿½4ï¿½	S*@^_bï¿½fÊ¸ï¿½hOcK=ï¿½Vï¿½o3+kZï¿½ï¿½ï¿½,Hzï¿½qwxï¿½ï¿½ï¿½:ï¿½)M5yï¿½Î²3dEï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½%ï¿½ï¿½ï¿½ï¿½_cß½ï¿½~2qï¿½ï¿½V%?ï¿½;~kï¿½Nï¿½ï¿½ï¿½q`ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½|Btnï¿½7ï¿½]ï¿½i+ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½.ï¿½ï¿½|ï¿½ï¿½kï¿½_ï¿½ï¿½}ï¿½[ï¿½ï¿½ï¿½Jï¿½ï¿½ï¿½ï¿½c]tï¿½ä¿ï¿½:ï¿½eï¿½(<Nbï¿½Rï¿½ï¿½qeï¿½FIï¿½ï¿½q?vï¿½ï¿½$ï¿½oï¿½ï¿½Tï¿½ï¿½ï¿½ï¿½ï¿½N2ï¿½Fï¿½ï¿½ï¿½ï¿½ï¿½vmï¿½ï¿½^ï¿½hï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½<ï¿½q.LŞšï¿½ï¿½ï¿½ï¿½ï¿½~zsï¿½[ï¿½ï¿½ï¿½ï¿½!Rjï¿½PŞ´eï¿½ï¿½`dï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(iï¿½UBï¿½ï¿½ï¿½qï¿½ï¿½hï¿½ï¿½ï¿½mqï¿½:ï¿½h)Yï¿½Sbï¿½ï¿½Aï¿½ï¿½ï¿½:ï¿½Â˜ï¿½@ï¿½(gï¿½ï¿½ï¿½Dï¿½>u=ï¿½Hï¿½Uï¿½Uï¿½ï¿½ï¿½iï¿½!uï¿½ï¿½;IENDï¿½B`ï¿½
------WebKitFormBoundaryBtCkPAw9wNtlcOjj
Content-Disposition: form-data; name="text1"

value1
------WebKitFormBoundaryBtCkPAw9wNtlcOjj
Content-Disposition: form-data; name="text2"

value2
------WebKitFormBoundaryBtCkPAw9wNtlcOjj
Content-Disposition: form-data; name="submit"

submit
------WebKitFormBoundaryBtCkPAw9wNtlcOjj--
```



å¾ˆæŠ±æ­‰ä½¿ç”¨baiduä½œä¸ºç›®æ ‡åœ°å€ã€‚å„ç§æµ‹è¯•åœºæ™¯å¤§æ¦‚æ˜¯baiduèƒ½å‘æŒ¥æ®‹çƒ­çš„æœ€é‡è¦åœºåˆäº†ã€‚



æˆ‘ä»¬æ¥è§£æä¸€ä¸‹å‡ ä¸ªå…³é”®ä¿¡æ¯ï¼š

```
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryBtCkPAw9wNtlcOjj
```

è¿™ä¸€è¡Œè¡¨æ˜äº†æ•´ä¸ªbodyä½“çš„content-typeï¼š`multipart/form-data`ï¼Œä¸å¹³æ—¶ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªå±æ€§è¿™æ¬¡è¿˜å¸¦äº†ååŠæ®µï¼š`boundary=----WebKitFormBoundaryBtCkPAw9wNtlcOjj`ã€‚ç”±äºè¯·æ±‚çš„æ•´ä¸ªè´Ÿè½½åŒ…å«äº†å¤šæ®µå†…å®¹ï¼Œæ‰€ä»¥æµè§ˆå™¨å¸®æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªè¶³å¤Ÿé•¿è¶³å¤Ÿç‰¹æ®Šçš„â€œåˆ†éš”ç¬¦â€ï¼Œç”¨æ¥å°†æ•´ä¸ªbodyä½“åˆ†å‰²æˆç‹¬ç«‹çš„å¤šæ®µã€‚

17è¡Œæœ€åä¸€ä¸ªheaderä¹‹åæ˜¯ä¸€ä¸ªç©ºè¡Œï¼Œè¡¨ç¤ºheaderéƒ¨åˆ†çš„ç»“æŸï¼Œæ•´ä¸ªPOSTè¯·æ±‚çš„bodyéƒ¨åˆ†å¼€å§‹ã€‚

æ¥ä¸‹æ¥ï¼Œåˆ†éš”ç¬¦å°±å‡ºç°äº†ï¼Œå•ç‹¬å æ®ä¸€è¡Œã€‚æ¯ä¸ªåˆ†éš”ç¬¦ä¹‹åï¼Œå°±æ˜¯è¿™ä¸ªpartçš„èŒƒå›´ã€‚å®ƒåŒæ ·ç”±è‡ªå·±çš„headerã€ç©ºè¡Œã€bodyä¸‰éƒ¨åˆ†ç»„æˆã€‚

æ¯ä¸ªpartå¯ä»¥æºå¸¦ä¸¤ä¸ªå¤´ï¼š

- `Content-Disposition`è¡¨ç¤ºæ­¤éƒ¨åˆ†çš„å¤„ç½®æ–¹å¼ï¼Œåœ¨è¿™é‡Œç»Ÿä¸€å€¼ä¸º`form-data`ï¼Œåæ¥`name`å±æ€§è¡¨ç¤ºå­—æ®µåç§°ï¼Œå¦‚æœæ˜¯æ–‡ä»¶å†…å®¹çš„è¯åæ¥ä¸Šä¼ æ—¶çš„æœ¬åœ°æ–‡ä»¶åã€‚
- å¦‚æœè¿™ä¸ªpartæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿˜å¯ä»¥é™„åŠ `Content-Type`è¡¨ç¤ºè¿™ä¸ªæ–‡ä»¶çš„ç±»å‹ã€‚è¿™ä¹Ÿå°±æ˜¯ç¾¤é‡Œå°å“¥é—®çš„æˆªå›¾çº¢æ¡†éƒ¨åˆ†çš„åº•å±‚å®ç°ã€‚

æ¯ä¸ªpartçš„bodyéƒ¨åˆ†éå¸¸ç®€å•ï¼Œç²—æš´çš„é™„åŠ äº†æ•´ä¸ªå­—æ®µçš„å†…å®¹ã€‚æ— è®ºæ˜¯æ–‡æœ¬å­—æ®µçš„å€¼ï¼Œè¿˜æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶æœ¬ä½“ï¼Œéƒ½ä¸åœ¨è¯ä¸‹ã€‚

ç„¶åæ˜¯ä¸‹ä¸€ä¸ªåˆ†éš”ç¬¦ï¼Œä¸‹ä¸€ä¸ªpartï¼Œç›´åˆ°æœ€åï¼Œç”±å•ç‹¬ä¸€è¡Œ**åˆ†éš”ç¬¦+`--`**ç»“æŸpartåˆ—è¡¨ä»¥åŠæ•´ä¸ªè¯·æ±‚bodyä½“ã€‚

è¿™å°±æ˜¯HTTPåè®®å±‚é¢çš„`multipart/form-data`ã€‚



## `requests`å®ç°

å¾ˆé—æ†¾çš„æ˜¯ï¼Œä»¥ä¸Šå®ç°æ–¹å¼æ˜¯éå¸¸â€œå¤è€â€çš„æ–‡ä»¶ä¸Šä¼ æ–¹å¼ï¼Œæ›¾ç»æµè¡ŒäºHTML+CGIæ—¶ä»£ï¼Œæ¯•ç«Ÿé‚£æ—¶å€™è¿JSéƒ½å¾ˆå°‘å¾ˆå°‘ï¼Œæ›´ä¸å­˜åœ¨AJAXè¿™ç§å¯ä»¥ç‹¬ç«‹å‘é€å’Œç®¡ç†è¯·æ±‚çš„åŠŸèƒ½ã€‚ä¸è®ºæœ‰å¤šå°‘è¡¨å•é¡¹ï¼Œä¸è®ºå…¶ä¸­æœ‰å‡ ä¸ªæ˜¯æ–‡ä»¶ï¼Œä¸è®ºæ•´ä¸ªè¯·æ±‚æœ‰å¤šå¤§å¤±è´¥ç‡æœ‰å¤šé«˜ï¼Œéƒ½å€¾å‘äºä¸€æŠŠæ¢­æäº¤æ•´ä¸ªè¡¨å•ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç°ä»£å‰ç«¯çš„è¯·æ±‚APIéƒ½ä¸å¤ªå€¾å‘äºè¿™ä¹ˆè®¾è®¡äº†ã€‚èµ„æºéƒ½æ˜¯RESTfulï¼Œæ–‡ä»¶ä¸Šä¼ éƒ½æ˜¯ç‹¬ç«‹å¼‚æ­¥å¯å®¹é”™å¯é‡è¯•ï¼Œå°±è¿TCPé“¾æ¥éƒ½å¯ä»¥å¤ç”¨ï¼Œè¿˜æœ‰ä»€ä¹ˆç†ç”±ä¸€æŠŠæ¢­å‘¢ï¼Ÿ

æ‰€ä»¥ï¼Œ`requests`ä»¥â€œä¸å¤Ÿpythonicâ€ä¸ºç”±å·®ä¸å¤šæ”¾å¼ƒäº†è¿™ä¸ªå¤è€å¤æ‚åˆå¯æ€œçš„`multipart/form-data`ï¼Œåªæä¾›äº†éå¸¸æœ‰é™çš„æ”¯æŒã€‚å¹¸è¿çš„æ˜¯ï¼Œå®˜æ–¹æ–‡æ¡£ç»™å‡ºäº†æŒ‡å¼•ï¼šå®ƒä»‹ç»äº†ä¸€ä¸ª`requests`çš„æ‰©å±•`requests_toolbelt`ã€‚

å€Ÿç”±`requests_toolbelt`çš„å¸®åŠ©ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªpartçš„multipartè¯·æ±‚å¹¶ä¸ºæ¯ä¸€ä¸ªpartæŒ‡å®šContent-Typeã€‚

```python
import requests
from requests_toolbelt.multipart.encoder import MultipartEncoder

fields = {
    'file1': ('druid.png', open('druid.png', 'rb'), 'image/png'),
    'file2': ('paladin.png', open('paladin.png', 'rb'), 'image/png'),
    'text1': 'value1',
    'text2': 'value2',
    'submit': 'submit',
}
multipart = MultipartEncoder(fields=fields)
headers = {
    'Content-Type': multipart.content_type,
}
proxies = {
    'http': 'socks5://localhost:8889',  # Charles
}
r = requests.post('http://www.baidu.com', data=multipart, headers=headers, proxies=proxies, timeout=10)
print(r.text)
```



ç”±æ­¤ï¼Œç¾¤å‹çš„é—®é¢˜å·²ç»å›ç­”å®Œæ¯•ã€‚



## å‚è€ƒ

https://www.ietf.org/rfc/rfc1867.txtï¼Œæœ€æƒå¨çš„multipartè§„èŒƒå®šä¹‰ã€‚é‡Œé¢è¿˜æœ‰æ›´å¤šæ›´è¯¦ç»†æ›´å˜æ€çš„ç”¨æ³•ã€‚

https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type

[https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition)

http://cn.python-requests.org/zh_CN/latest/



